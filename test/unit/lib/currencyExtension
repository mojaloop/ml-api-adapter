const Test = require('tape')
const BaseJoi = require('@hapi/joi')
const currencyExtension = require('../../../src/lib/joiExtensions/customCurrencyCodeExtension')
const Joi = BaseJoi.extend(currencyExtension)

Test('custom currency extension works', assert => {
  try {
    Joi.assert('usd', Joi.string().currency())
    assert.pass()
    assert.end()
  } catch (e) {
    assert.fail(e)
    assert.end()
  }
})

Test('custom currency throws when not currency', assert => {
  try {
    Joi.assert('fail', Joi.string().currency())
    assert.fail('must throw')
    assert.end()
  } catch (e) {
    assert.pass()
    assert.end()
  }
})
